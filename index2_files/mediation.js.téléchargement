!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o=n(1),r=n(9),i=n(4),a=window.APN_macros.uuid,s=i.reduce(window.APN_macros.ads,function(t,e){return e&&e.content_source?("banner"!==e.ad_type||"csm"!==e.content_source&&"ssm"!==e.content_source&&"rtb"!==e.content_source||t.push(e),t):t},[]);try{var c=new o(s,r.createPlaceholder(),a);window.APN_macros=null,c.on("done",function(){c.logOutcome()}),c.start()}catch(u){i.handleError(u,a)}},function(t,e,n){function o(t,e,n){var o;if(void 0===t||t instanceof Array==!1)throw new Error("Passback requires an array of ads");this._uuid=n,this._container=e,this._ads=u(t),o=this._ads[this._ads.length-1],this._endCall=u(o),l.validateChain(t),this._logger=new i}var r=n(2),i=n(3),a=n(5),s=n(11),c=n(9),u=n(12),d=n(4),l=n(13),h=n(14),f=n(15);n(7)(),o.prototype.start=function(){if(window.postMessage){var t=this._ads;this.next(t[0],t.slice(1))}else"rtb"===this._endCall.content_source?this.startEndCall(this._endCall):this.trigger("done")},o.prototype.next=function(t,e){function n(n){var o,i;if(!n||"object"!=typeof n){var a=new Error("An internal error has occurred with mediationjs.");throw a.name="adRequestFailure",r._logger.flush(),r.trigger("done"),a}if(n.adFilled?(o="SUCCESS",r.clearChain(c)):o=n.timedOut?"TIMEOUT":"NOBID",i=n.latency,p&&l.setSession(p),"SUCCESS"===o)r._logger.log(t,{code:o,reason:h[o],latency:i,url:u.response_url}),f.log(u.response_url,{reason:h[o],latency:i}),r.trigger("done");else{if(!e.length){var d=new Error("All ads resulted in no bid and no RTB ad was provided");throw d.name="adNoBid",r._logger.log(t,{code:o,reason:h[o],latency:i}),r._logger.flush(),d}r._logger.log(t,{code:o,reason:h[o],latency:i,url:u.response_url}),f.log(u.response_url,{reason:h[o],latency:i}),"rtb"!==s.content_source?r.next(s,c):r.startEndCall(r._endCall,{code:o,reason:h[o],latency:i})}}var o,r=this,i="__adnxs_passback__"+d.id(),s=e[0],c=e.slice(1),u=d.getAdObject(t),p="rtb"!==t.content_source?d.getSessionId(u.response_url):null;o=new a({passbackId:i,width:u.handler[0].params.width,height:u.handler[0].params.height,content:u.handler[0].content,timeout:u.timeout_ms,container:this._container,trackers:u.trackers,uuid:this._uuid}),this._logger.log(t,{code:"INIT",url:u.request_url}),f.log(u.request_url),o.once("complete",function(t){try{n(t)}catch(e){d.handleError(e,r._uuid)}}),d.nextTick(function(){o.startRequest()})},o.prototype.clearChain=function(t){return t&&t.length?(d.each(t,function(t){if("rtb"!==t.content_source){var e=d.getSessionId(d.getAdObject(t).response_url);l.setSession(e)}}),void 0):!1},o.prototype.startEndCall=function(t,e){var n,o=this,r=d.getAdObject(t),i=r.banner.content;e&&o._logger.log(t,{code:"CONTINUE",reason:e.reason,latency:e.latency,content:i}),n=new s({width:r.banner.width,height:r.banner.height,content:i,container:this._container,trackers:r.trackers,uuid:this._uuid}),d.nextTick(function(){n.startRequest(),n.onUpdate(o.resizer),o.trigger("done")})},o.prototype.logOutcome=function(){this._logger.flush()},o.prototype.resizer=function(t){var e=c.getIframeDocument(t),n=c.getViewport(e),o=n[0],r=n[1];o>0&&r>0&&(t.width=o,t.height=r)},r.mixin(o.prototype),t.exports=o},function(t){t.exports={mixin:function(t){t.on=function(t,e,n){n=n||!1,this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push([e,n])},t.once=function(t,e){this.on(t,e,!0)},t.trigger=function(t){this.events=this.events||{};var e=(this.events[t]||[]).length,n=Array.prototype.slice.call(arguments,1);if(e)for(var o=e-1;o>=0;o--)this.events[t][o][0].apply(this,n),this.events[t][o][1]&&this.events[t].splice(o,1)},t.offAll=function(){this.events={}}}}},function(t,e,n){function o(){this._logs=[]}function r(t){return"creative ids "+t}function i(){console.group?console.group.apply(console,arguments):console.log.apply(console,arguments)}function a(){console.groupCollapsed?console.groupCollapsed.apply(console,arguments):i.apply(this,arguments)}function s(){console.groupEnd&&console.groupEnd()}function c(t){switch(t){case"SUCCESS":return"green";case"CONTINUE":return"orange";case"NOBID":return"orange";default:return"red"}}function u(t){var e=["anx-mediation: ",t.code,t.latency?t.latency+"ms":"--"];return e.join(" ")}var d=n(4);o.prototype.flush=function(){if(this._logs.length>0){var t,e=this._logs[this._logs.length-1]||{},n=d.reduce(this._logs,function(t,e){return t[e.creativeIds]||(t[e.creativeIds]=[]),t[e.creativeIds]=t[e.creativeIds].concat(e),t},{});i("anx-mediation %c"+e.code,"color: "+c(e.code)),d.each(this._logs,function(e){var o;t!==e.creativeIds&&(t&&s(),o=n[e.creativeIds][n[e.creativeIds].length-1],t=e.creativeIds,a("anx-mediation: %c"+o.code+" %c"+r(e.creativeIds),"color: "+c(o.code),"color: black"));var i=u(e);console.log(i)}),t&&s(),s()}},o.prototype.log=function(t,e){var n,o=d.getAdObject(t);n="rtb"===t.content_source&&t.creative_id?[t.creative_id].join(","):d.map(o.handler||[],function(t){return t.params.creativeId}).join(",");var r="rtb"===t.content_source?o.banner.content:o.handler[0].content;this._logs=this._logs.concat({creativeIds:n,code:e.code,reason:e.reason,latency:e.latency,url:e.url,content:r})},t.exports=o},function(t){t.exports={noop:function(){},find:function(t,e){for(var n,o=t.length,r=0;o>r;){if(e(t[r])){n=t[r];break}r++}return n||null},reduce:function(t,e,n){return this.each(t,function(t,o){n=e(n,t,o)}),n},map:function(t,e){var n=[];return this.each(t,function(t){n.push(e(t))}),n},each:function(t,e){var n=t.length,o=0;if(!n)return!1;for(;n>o;)e(t[o],o,t),o++},getSessionId:function(t){var e=t.match(/[?&]info=([^&]+)/);return e&&e[1]?e[1]:""},doGet:function(t){var e=new Image;e.src=t},id:function(){return Math.random().toString(36).substr(2,9)+Date.now()},nextTick:function(t){setTimeout(t,0)},getAdObject:function(t){if(!t||"object"!=typeof t)throw new Error("No ad object passed in");if(t.csm)return t.csm;if(t.ssm)return t.ssm;if(t.rtb)return t.rtb;throw new Error("Ad did not contain `csm`, `ssm`, or `rtb` object")},handleError:function(t,e){if(!window.parent.apntag)throw t;var n="adNoBid"===t.name?"adNoBid":"adRequestFailure"===t.name?"adRequestFailure":"adError",o={errMessage:t.message,exception:t};"adNoBid"===t.name?window.parent.apntag.emitEvent(e,n):window.parent.apntag.emitEvent(e,n,o)},isSafeFrameEnabled:function(){return"undefined"!=typeof $sf?!0:!1}}},function(t,e,n){function o(t){if(void 0===t||"object"!=typeof t)throw new Error("MediationFrame invoked without a `params` object");var e=this,n=e._passbackId=t.passbackId;e._width=t.width,e._height=t.height,e._postMessage=new a,e._timeout=t.timeout,e._content=t.content,e._container=t.container,e._trackers=t.trackers,e._uuid=t.uuid,e._timeout&&(l=e._timeout),e._iframe=s.createFrame(e._width,e._height,n||""),n&&(window[n]=function(t){t?(s.showFrame(e._iframe),d[n]=window.setTimeout(function(){d[n]=null,e._onComplete(t,!1)},l)):e._onComplete(t,!1)}),e._postMessage.on("message",function(t){t===e._passbackId&&e._onComplete(!1,!1)})}function r(t,e){var n=t;return e&&(n="<script>"+u.replace(/\${PASSBACK_ID}/g,e)+"</script>"+n,n+="<script>window.ADNXSMediation.ready();</script>"),n}var i=n(2),a=n(6),s=n(9),c=n(4),u=n(10),d={},l=1e3;o.prototype.startRequest=function(){var t=this,e=this._iframe,n=r(this._content,this._passbackId);this._startTime=Date.now(),this._container.appendChild(e),s.iframeWrite(e,s.getHTMLWithContent(n)),this._timeout&&(this._timeoutId=window.setTimeout(function(){t._onComplete(!1,!0)},this._timeout))},o.prototype._onComplete=function(t,e){var n=this._iframe,o=new Date-this._startTime;if(t&&window.parent.apntag&&window.parent.apntag.resizeAd&&window.parent.apntag.resizeAd(this._uuid,[this._width,this._height]),d[this._passbackId]){if(e)return;t||clearTimeout(d[this._passbackId])}t||(window[this._passbackId]=c.noop),e?s.removeFrame(n):t?s.showFrame(n):t||s.hideFrame(n),t&&this._trackers&&c.each(this._trackers,function(t){t.impression_urls&&c.each(t.impression_urls,function(t){c.doGet(t)})}),this._timeoutId&&window.clearTimeout(this._timeoutId),this.trigger("complete",{adFilled:t,timedOut:e||!1,latency:o})},o.prototype.onUpdate=function(t){var e=this._iframe,n=s.getIframeDocument(e),o=function(){t(e)};o(),s.observeDOM(n,o)},i.mixin(o.prototype),t.exports=o},function(t,e,n){function o(){function t(t){return-1===a.indexOf(t.origin)&&t.origin.replace("http://","")!==window.location.host&&t.origin.replace("https://","")!==window.location.host?!1:(n.trigger("message",t.data),void 0)}function e(){window.ADNXSOffEvent("message",t,!1)}var n=this;window.ADNXSOnEvent("message",t,!1),this.close=e,this.onMessage=t}n(7)();var r=n(2),i=n(8),a=["http://"+i.HOST_CDN,"https://"+i.HOST_CDN,"http://"+i.HOST_ACDN,"https://"+i.HOST_ACDN];r.mixin(o.prototype),t.exports=o},function(t){function e(t){t=t||window;var e=function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}();t.console=t.console||{log:function(){}},t.ADNXSOnEvent=t.addEventListener?t.addEventListener:function(e,n){t.attachEvent("on"+e,n)},t.ADNXSOffEvent=t.removeEventListener?t.removeEventListener:function(e,n){t.detachEvent("on"+e,n)},Date.now=Date.now||function(){return(new Date).getTime()},t.__anx_local_storage__=e?t.localStorage:{getItem:function(e){return t.__anx_local_storage_store=t.__anx_local_storage_store||{},t.__anx_local_storage_store[e]||[]},setItem:function(e,n){t.__anx_local_storage_store=t.__anx_local_storage_store||{},t.__anx_local_storage_store[e]=n},removeItem:function(e){t.__anx_local_storage_store=t.__anx_local_storage_store||{},delete t.__anx_local_storage_store[e]}},"function"!==Object.keys&&(Object.keys=function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on non-object");var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),r=o.length>>>0;if(0===r)return-1;var i=+e||0;if(1/0===Math.abs(i)&&(i=0),i>=r)return-1;for(n=Math.max(i>=0?i:r-Math.abs(i),0);r>n;){if(n in o&&o[n]===t)return n;n++}return-1})}t.exports=e},function(t){t.exports={HOST_CDN:"cdn.adnxs.com",HOST_ACDN:"acdn.adnxs.com"}},function(t){var e=null;t.exports={getIframeDocument:function(t){var e=t.document;return t.contentDocument&&t.contentDocument.documentElement?e=t.contentDocument:t.contentWindow&&t.contentWindow.document&&(e=t.contentWindow.document),e},getIframeWindow:function(t){return t.contentWindow},iframeWrite:function(t,e){var n=this.getIframeWindow(t);n.contents=e,t.src='javascript:window["contents"]'},createFrame:function(t,e,n){var o=document.createElement("iframe");return o.id=n,o.width=t,o.height=e,o.frameBorder="0",o.marginWidth="0",o.marginHeight="0",o.scrolling="no",o.setAttribute("border","0"),o.setAttribute("allowtransparency","true"),o.style.visibility="hidden",o.style.display="none",o},showFrame:function(t){t.style.display="",t.style.visibility="visible"},hideFrame:function(t){t.style.display="none",t.style.visibility="hidden"},removeFrame:function(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},getHTMLWithContent:function(t){return["<!DOCTYPE html>","<html>","<head>",'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">','<meta http-equiv="X-UA-Compatible" content="IE=edge">','<meta name="viewport" content="width=device-width, initial-scale=1">','<meta http-Equiv="Cache-Control" Content="no-cache">','<meta http-Equiv="Pragma" Content="no-cache">','<meta http-Equiv="Expires" Content="0">',"</head>","<body>",t,"</body>","</html>"].join("")},createPlaceholder:function(){if(e)return e;for(var t=document.createElement("div"),n=document.getElementsByTagName("script"),o=n[n.length-1],r=n.length-1;r>0;r--)if(/mediation\.js/.test(n[r].src)){o=n[r];break}return o.parentNode.insertBefore(t,o),e=t,t},getViewport:function(t){return[t.documentElement.scrollWidth,t.documentElement.scrollHeight]},observeDOM:function(t,e){var n=window.MutationObserver||window.WebKitMutationObserver,o=window.addEventListener;if(n){var r=new n(function(t){(t[0].addedNodes.length||t[0].removedNodes.length)&&e()});r.observe(t,{childList:!0,subtree:!0})}else o?(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1)):t.attachEvent&&t.attachEvent("onreadystatechange",e)}}},function(t){t.exports='!function(n){function t(n){function t(n,e){n.postMessage("${PASSBACK_ID}","*"),n.top!==n&&e<50&&setTimeout(t(n.parent,++e),0)}n&&"noad"===n.data&&t(this.parent,0)}function e(n,t,e){n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent&&n.attachEvent("on"+t,e)}function o(t){var e=n.parent["${PASSBACK_ID}"];e&&"function"==typeof e?e(t):console.log("anx-mediation: WARN > Couldn\'t callback into mediation with filled: ",t)}function i(t){e(n,"load",function(){m.getTargetId()?r(n,function(){setTimeout(t,0)}):setTimeout(t,0)})}function c(){ADNXSMediation.isAsync()||(s("load",c,!1),o(!0))}function a(n){var t=n.document;return n.contentDocument&&n.contentDocument.documentElement?t=n.contentDocument:n.contentWindow&&n.contentWindow.document&&(t=n.contentWindow.document),t}function r(n,t){function o(){if(u===++d)return t()}var i,c,u=0,d=0,f=m.getTargetId();try{if(i=a(n),i.querySelectorAll(f).length)return t();c=i.querySelectorAll("frame,iframe"),u=c.length}catch(n){return t()}if(0===u)return t();for(var s=0;s<u;s++){var l=c[s];e(l,"load",function(){r(l,o)})}}function u(n){f=n}e(n,"message",t);var d={wait:function(){i(c)},domready:function(){o(!0)},async:function(){}},f="wait",s=n.removeEventListener||function(t,e){n.detachEvent("on"+t,e)},l=function(){o(!1)},A=function(){o(!0)},m={noAd:l,noad:l,adFilled:A,adfilled:A,setAsync:function(){u("async"),n.ADNXSAsync=!0},isAsync:function(){return!!n.ADNXSAsync},setStrategy:u,setTargetId:function(t){n.ADNXSTargetId=t},getTargetId:function(){return n.ADNXSTargetId},ready:function(){var t=n.parent["${PASSBACK_ID}"];(d[f]||d.wait)(t)}};n.ADNXSMediation=m,n.ADNXSAsync=!1}(this);'},function(t,e,n){function o(t){if(void 0===t||"object"!=typeof t)throw new Error("LastFrame invoked without a `params` object");var e=this._passbackId=t.passbackId;this._width=t.width,this._height=t.height,this._uuid=t.uuid,this._content=t.content,this._container=t.container,this._trackers=t.trackers,this._iframe=i.createFrame(this._width,this._height,e||"")}var r=n(2),i=n(9),a=n(7),s=n(4),c=n(8);o.prototype.startRequest=function(){if(s.isSafeFrameEnabled()){var t={name:"resizeAd",targetId:this._uuid,cmd:[this._width,this._height]},e=document.location.protocol+"//"+c.HOST_ACDN;window.parent.postMessage(JSON.stringify(t),e)}else window.parent.apntag&&window.parent.apntag.resizeAd&&window.parent.apntag.resizeAd(this._uuid,[this._width,this._height]);var n=this._iframe;this._container.appendChild(n),i.iframeWrite(n,i.getHTMLWithContent(this._content)),i.showFrame(n),this._trackers&&s.each(this._trackers,function(t){t.impression_urls&&s.each(t.impression_urls,function(t){s.doGet(t)})})},o.prototype.onUpdate=function(t){var e=this._iframe,n=i.getIframeDocument(e),o=function(){t(e)};a(e),e.ADNXSOnEvent("load",o,!1),o(),i.observeDOM(n,o)},r.mixin(o.prototype),t.exports=o},function(t){function e(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)||"object"==typeof t}function n(t){var o=null;if(t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)){var r=0,i=t.length;for(o=[],r;i>r;r++)o[r]=e(t[r])?n(t[r]):t[r];return o}if("object"==typeof t){o={};for(var a in t)t.hasOwnProperty(a)&&(o[a]=e(t[a])?n(t[a]):t[a]);return o}return t}t.exports=n},function(t,e,n){var o=n(4),r="adnxs_mediation",i=20;t.exports={getSessions:function(){var t;try{t=window.__anx_local_storage__.getItem(r).split(",")}catch(e){t=[]}return t},setSession:function(t){var e=this.getSessions();if(this.hasSessionBeenCalled(t))throw new Error("anx-mediation: SESSION-ERROR: Session already queried: ",t);return e.length>=i&&(e=e.slice(e.length-i+1,e.length)),e.push(t),window.__anx_local_storage__.setItem(r,e.join(",")),e},hasSessionBeenCalled:function(t){return!!o.find(this.getSessions(),function(e){return e===t})},getThreshold:function(){return i},validateChain:function(t){var e=this;o.each(t,function(t){if("rtb"!==t.content_source){var n=o.getSessionId(o.getAdObject(t).response_url);if(e.hasSessionBeenCalled(n))throw new Error("anx-mediation: CHAIN-ERROR: Chain has already been called!")}})}}},function(t){t.exports={SUCCESS:0,TIMEOUT:1,NOBID:2,INTERNALERROR:3,INVALIDREQUEST:5}},function(t,e,n){var o=n(4);t.exports={log:function(t,e){e?o.doGet(t+"&reason="+e.reason+"&latency="+e.latency):o.doGet(t)}}}]);